<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mobile Debug Page</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            min-height: 100vh;
        }
        .box {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            margin: 10px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        h1 {
            font-size: 2rem;
            margin-bottom: 20px;
        }
        h2 {
            font-size: 1.3rem;
            margin: 15px 0 10px 0;
        }
        .info {
            font-size: 0.9rem;
            line-height: 1.6;
        }
        .success {
            color: #4CAF50;
            font-weight: bold;
        }
        .error {
            color: #ff5252;
            font-weight: bold;
        }
        #console-log {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            font-family: monospace;
            font-size: 0.85rem;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 10px;
        }
        .log-entry {
            margin: 5px 0;
            padding: 5px;
            border-left: 3px solid rgba(255, 255, 255, 0.3);
            padding-left: 10px;
        }
        button {
            background: white;
            color: #667eea;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            margin: 10px 5px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>üì± Mobile Debug Console</h1>
    
    <div class="box">
        <h2>‚úÖ Connection Status</h2>
        <div class="info">
            <div>üìç <strong>URL:</strong> <span id="current-url"></span></div>
            <div>üïê <strong>Time:</strong> <span id="current-time"></span></div>
            <div>üì± <strong>Device:</strong> <span id="user-agent"></span></div>
            <div>üìê <strong>Screen:</strong> <span id="screen-size"></span></div>
            <div>üåê <strong>Network:</strong> <span id="connection-type"></span></div>
        </div>
    </div>

    <div class="box">
        <h2>üîß JavaScript Status</h2>
        <div id="js-status" class="info">Testing...</div>
    </div>

    <div class="box">
        <h2>üéØ Quick Tests</h2>
        <button onclick="testFetch()">Test Fetch API</button>
        <button onclick="testLocalStorage()">Test Storage</button>
        <button onclick="testMapbox()">Test Mapbox</button>
        <button onclick="clearLogs()">Clear Logs</button>
    </div>

    <div class="box">
        <h2>üìã Console Logs</h2>
        <div id="console-log"></div>
    </div>

    <div class="box">
        <h2>üöÄ Next Steps</h2>
        <button onclick="window.location.href='/'">Try Main App</button>
        <button onclick="window.location.reload()">Reload This Page</button>
    </div>

    <script>
        // Capture console logs
        const consoleLog = document.getElementById('console-log');
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;

        function addLog(message, type = 'log') {
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.style.borderLeftColor = type === 'error' ? '#ff5252' : type === 'warn' ? '#ffa726' : '#4CAF50';
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            consoleLog.appendChild(entry);
            consoleLog.scrollTop = consoleLog.scrollHeight;
        }

        console.log = function(...args) {
            originalLog.apply(console, args);
            addLog(args.join(' '), 'log');
        };

        console.error = function(...args) {
            originalError.apply(console, args);
            addLog('ERROR: ' + args.join(' '), 'error');
        };

        console.warn = function(...args) {
            originalWarn.apply(console, args);
            addLog('WARN: ' + args.join(' '), 'warn');
        };

        // Catch unhandled errors
        window.addEventListener('error', (event) => {
            console.error(`Unhandled error: ${event.message} at ${event.filename}:${event.lineno}`);
        });

        window.addEventListener('unhandledrejection', (event) => {
            console.error(`Unhandled promise rejection: ${event.reason}`);
        });

        // Update page info
        function updateInfo() {
            document.getElementById('current-url').textContent = window.location.href;
            document.getElementById('current-time').textContent = new Date().toLocaleString();
            document.getElementById('user-agent').textContent = 
                navigator.userAgent.includes('iPhone') ? 'iPhone Safari' : 
                navigator.userAgent.includes('iPad') ? 'iPad Safari' : 
                navigator.userAgent.includes('Android') ? 'Android' : 
                'Desktop';
            document.getElementById('screen-size').textContent = 
                `${window.innerWidth}x${window.innerHeight} (${window.devicePixelRatio}x DPI)`;
            document.getElementById('connection-type').textContent = 
                navigator.connection ? navigator.connection.effectiveType : 'Unknown';
        }

        // JavaScript status check
        function checkJavaScript() {
            const jsStatus = document.getElementById('js-status');
            let tests = [];
            
            // Test modern JS features
            try {
                const arrow = () => true;
                const spread = [...[1, 2, 3]];
                const promise = new Promise(resolve => resolve(true));
                tests.push('‚úÖ ES6 Features: Working');
            } catch (e) {
                tests.push('‚ùå ES6 Features: Failed - ' + e.message);
            }

            // Test DOM APIs
            try {
                const div = document.createElement('div');
                div.classList.add('test');
                tests.push('‚úÖ DOM APIs: Working');
            } catch (e) {
                tests.push('‚ùå DOM APIs: Failed - ' + e.message);
            }

            // Test Fetch API
            try {
                if (typeof fetch !== 'undefined') {
                    tests.push('‚úÖ Fetch API: Available');
                } else {
                    tests.push('‚ùå Fetch API: Not available');
                }
            } catch (e) {
                tests.push('‚ùå Fetch API: Error - ' + e.message);
            }

            // Test localStorage
            try {
                localStorage.setItem('test', 'value');
                localStorage.removeItem('test');
                tests.push('‚úÖ localStorage: Working');
            } catch (e) {
                tests.push('‚ùå localStorage: Failed - ' + e.message);
            }

            jsStatus.innerHTML = tests.join('<br>');
        }

        // Test functions
        function testFetch() {
            console.log('Testing Fetch API...');
            fetch('/')
                .then(response => {
                    console.log(`‚úÖ Fetch successful: ${response.status} ${response.statusText}`);
                    return response.text();
                })
                .then(html => {
                    console.log(`‚úÖ Response length: ${html.length} characters`);
                })
                .catch(error => {
                    console.error(`‚ùå Fetch failed: ${error.message}`);
                });
        }

        function testLocalStorage() {
            try {
                const testKey = 'mobile-debug-test';
                const testValue = 'test-value-' + Date.now();
                localStorage.setItem(testKey, testValue);
                const retrieved = localStorage.getItem(testKey);
                localStorage.removeItem(testKey);
                
                if (retrieved === testValue) {
                    console.log('‚úÖ localStorage: Read/Write working');
                } else {
                    console.error('‚ùå localStorage: Value mismatch');
                }
            } catch (error) {
                console.error(`‚ùå localStorage: ${error.message}`);
            }
        }

        function testMapbox() {
            console.log('Testing if Mapbox would load...');
            if (typeof window.mapboxgl !== 'undefined') {
                console.log('‚úÖ Mapbox GL JS: Already loaded');
            } else {
                console.log('‚ÑπÔ∏è Mapbox GL JS: Not loaded yet (expected on this page)');
                console.log('Checking if CDN is accessible...');
                fetch('https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js', { method: 'HEAD' })
                    .then(() => console.log('‚úÖ Mapbox CDN: Accessible'))
                    .catch(() => console.error('‚ùå Mapbox CDN: Cannot reach'));
            }
        }

        function clearLogs() {
            consoleLog.innerHTML = '';
            console.log('Logs cleared');
        }

        // Initialize
        updateInfo();
        checkJavaScript();
        console.log('‚úÖ Mobile Debug Console initialized');
        console.log('Device Info:', {
            width: window.innerWidth,
            height: window.innerHeight,
            dpr: window.devicePixelRatio,
            touch: 'ontouchstart' in window
        });

        // Auto-update time
        setInterval(updateInfo, 1000);
    </script>
</body>
</html>





